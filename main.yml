---
version: "1.0"

steps:
  # Version control
  - include: ./git/main.yml
    tags: [core, git]

  # Programming languages - Using Presets
  - name: Install Python via pyenv
    preset: python
    with:
      version: "3.12.12"
      install_virtualenv: true
    tags: [dev, python]

  - name: Install Rust toolchain
    preset: rust
    with:
      toolchain: stable
      profile: default
    tags: [dev, rust]

  # Node.js already installed manually (v22.22.0)
  # - name: Install Node.js via nvm
  #   preset: nodejs
  #   with:
  #     version: "22"
  #     global_packages:
  #       - webpack
  #       - eslint
  #       - prettier
  #   tags: [dev, node]

  # Modern Unix tools
  # TODO: modern-unix preset has issues with templated state parameter
  # - name: Install modern Unix tools
  #   preset: modern-unix
  #   with:
  #     tools:
  #       - bat        # cat with syntax highlighting
  #       - exa        # ls replacement
  #       - zoxide     # smart cd
  #       - dust       # du replacement
  #       - duf        # df replacement
  #       - bottom     # top/htop replacement
  #   tags: [tools, modern-unix]

  - name: Install Go toolchain
    preset: go
    with:
      version: "latest"
      gopath: "{{ GOPATH }}"
    tags: [dev, golang]

  # Other languages
  - include: ./java/main.yml
    tags: [dev, java]

  - include: ./clojure/main.yml
    tags: [dev, clojure]

  # Terminal tools
  - include: ./fzf/main.yml
    tags: [tools, fzf]

  - include: ./zsh/main.yml
    tags: [core, shell]

  - include: ./tmux/main.yml
    tags: [tools, tmux]

  # Editors
  - include: ./nvim/main.yml
    tags: [editor, nvim]

  # macOS specific
  - include: ./alacritty/main.yml
    when: os == "darwin"
    tags: [macos, terminal]

  - include: ./macos/main.yml
    when: os == "darwin"
    tags: [macos]
