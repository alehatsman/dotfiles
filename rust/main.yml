---
- name: Make sure rust tools are installed
  shell: |
    if ! command -v rustup &> /dev/null; then
      curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y;
    else
      echo "rustup is already installed, skipping installation";
    fi

- vars:
    cargo_packages:
      - bat
      - lsd
      - git-delta
      - xsv
      - code-minimap

- name: Make sure rust cargo packages are installed
  shell: |
    source ~/.cargo/env;
    for package in {{ cargo_packages | join: " " }}; do
      if ! cargo install --list | grep -q "^${package} "; then
        echo "Installing ${package}...";
        cargo install "${package}";
      else
        echo "${package} is already installed, skipping";
      fi
    done
